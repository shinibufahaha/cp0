<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Interfaces Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .info {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>JavaScript Interfaces Demo</h1>

    <div class="info" id="networkStatus"></div>
    <div class="info" id="mediaDevices"></div>
    <div class="info">
        <video id="videoElement" width="320" height="240" autoplay></video>
    </div>
    <div class="info" id="notifications"></div>
    <div class="info" id="batteryStatus"></div>
    <div class="info" id="userAgent"></div>
    <div class="info" id="screenInfo"></div>
    <div class="info" id="languageInfo"></div>

    <script>
        // 尝试获取网络状态
        try {
            function updateNetworkStatus() {
                const networkStatus = navigator.onLine ? "The device is online." : "The device is offline.";
                document.getElementById('networkStatus').innerText = networkStatus;
                alert(networkStatus);
            }
            window.addEventListener('online', updateNetworkStatus);
            window.addEventListener('offline', updateNetworkStatus);
            updateNetworkStatus();
        } catch (error) {
            alert("Failed to get network status: " + error);
        }

        // 尝试获取媒体设备信息
        try {
            navigator.mediaDevices.enumerateDevices()
                .then(function(devices) {
                    const mediaDevicesInfo = devices.map(device => `${device.kind}: ${device.label}`).join('<br>');
                    document.getElementById('mediaDevices').innerHTML = mediaDevicesInfo;
                    alert("Media devices info: " + mediaDevicesInfo);
                })
                .catch(function(err) {
                    alert("Failed to enumerate media devices: " + err.name + ": " + err.message);
                });
        } catch (error) {
            alert("Failed to access media devices: " + error);
        }

        // 尝试打开摄像头
        try {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        const video = document.getElementById('videoElement');
                        video.srcObject = stream;
                        alert("Camera opened successfully.");
                    })
                    .catch(function(error) {
                        alert("Failed to open camera: " + error);
                    });
            } else {
                alert("Camera API is not supported.");
            }
        } catch (error) {
            alert("Failed to access camera: " + error);
        }

        // 尝试获取通知权限并发送通知
        try {
            if (Notification.permission === "granted") {
                new Notification("Hello, world!");
                alert("Notification sent.");
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification("Hello, world!");
                        alert("Notification sent.");
                    }
                }).catch(function(error) {
                    alert("Notification permission request failed: " + error);
                });
            } else {
                alert("Notification permission denied.");
            }
        } catch (error) {
            alert("Failed to send notification: " + error);
        }

        // 尝试获取电池状态
        try {
            navigator.getBattery().then(function(battery) {
                const batteryStatus = `Battery level: ${battery.level * 100}%<br>Battery charging: ${battery.charging ? "Yes" : "No"}`;
                document.getElementById('batteryStatus').innerHTML = batteryStatus;
                alert("Battery status: " + batteryStatus);
            }).catch(function(error) {
                alert("Failed to get battery status: " + error);
            });
        } catch (error) {
            alert("Battery API is not supported: " + error);
        }

        // 尝试获取用户代理信息
        try {
            const userAgent = "User Agent: " + navigator.userAgent;
            document.getElementById('userAgent').innerText = userAgent;
            alert(userAgent);
        } catch (error) {
            alert("Failed to get user agent: " + error);
        }

        // 尝试获取屏幕信息
        try {
            const screenInfo = `Screen width: ${window.screen.width}<br>Screen height: ${window.screen.height}`;
            document.getElementById('screenInfo').innerHTML = screenInfo;
            alert(screenInfo);
        } catch (error) {
            alert("Failed to get screen info: " + error);
        }

        // 尝试获取语言信息
        try {
            const languageInfo = "Language: " + navigator.language;
            document.getElementById('languageInfo').innerText = languageInfo;
            alert(languageInfo);
        } catch (error) {
            alert("Failed to get language info: " + error);
        }
    </script>
</body>
</html>
