<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>应用操作</title>
</head>
<body>
  <h1>选择操作</h1>
  <button id="vibrate">震动</button>
  <button id="exitButton">退出应用</button>
  <button id="getCurrentLocation">获取地理位置</button>
  <button id="startContinuousLocation">开启持续定位</button>
  <button id="getSessionData">获取SessionData</button>
  <button id="kvInterface_getAll">getAll</button>
   
  <script>
    function ready(callback) {
      // 如果jsbridge已经注入则直接调用
      if (window.AlipayJSBridge) {
        callback && callback();
      } else {
        // 如果没有注入则监听注入的事件
        document.addEventListener('AlipayJSBridgeReady', callback, false);
      }
    }

    ready(function() {
      document.getElementById('vibrate').addEventListener('click', function() {
        AlipayJSBridge.call('vibrate');
      });

      document.getElementById('exitButton').addEventListener('click', function() {
        AlipayJSBridge.call('exitApp');
      });

      document.getElementById('getCurrentLocation').addEventListener('click', function() {
         AlipayJSBridge.call('getCurrentLocation', { requestType: 3, bizType: "test" }, function(result) {
          if (result.error) {
            alert(result.errorMessage);
            return;
          }
          alert(JSON.stringify(result));
        });
      });


    document.querySelector('startContinuousLocation').addEventListener('click', function() {
    AlipayJSBridge.call('startContinuousLocation', { bizType: 'didi', callbackInterval: 5000 }, function (result) {
      if (result.error) {
        alert(result.errorMessage);
        return;
      }
      alert(JSON.stringify(result));
    });
  });

  document.querySelector('getSessionData').addEventListener('click', function() {
    AlipayJSBridge.call('getSessionData', {
      keys: ['name', 'token', 'id', 'address', 'code', 'nickname', 'WebToken', 'UserInfo', 'userInfo', 'userToken', 'UserToken"]
    }, function(result) {
      alert(JSON.stringify(result));
    });
  });

    });

  document.querySelector('kvInterface_getAll').addEventListener('click', function() {
        alert(kvInterface.getAll());
  });
  </script>
</body>
</html>

